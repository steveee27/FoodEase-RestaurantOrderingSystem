{"version":3,"file":"HttpApiBuilder.js","names":["Chunk","_interopRequireWildcard","require","Context","Effect","Encoding","FiberRef","_Function","_GlobalValue","HashMap","HashSet","Layer","ManagedRuntime","Option","ParseResult","_Pipeable","Redacted","Schema","_Unify","HttpApi","_HttpApiError","HttpApiMiddleware","HttpApiSchema","HttpApp","HttpMethod","HttpMiddleware","HttpRouter","HttpServer","HttpServerRequest","HttpServerResponse","OpenApi","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","Router","Tag","exports","api","effect","Api","map","context","serve","middleware","httpApp","pipe","app","unwrapEffect","provide","Live","gen","makeMiddlewareMap","middlewares","router","applyMiddleware","apiMiddleware","serviceOption","Middleware","errorSchema","makeErrorSchema","encodeError","encodeUnknown","_tag","value","identity","catchAll","error","matchEffect","onFailure","die","onSuccess","succeed","toWebHandler","layer","options","runtime","make","merge","memoMap","handlerCached","handlerPromise","bindTo","bind","runtimeEffect","toWebHandlerRuntime","tap","handler","runPromise","request","undefined","then","dispose","HandlersTypeId","Symbol","for","HandlersProto","_Endpoints","pipeArguments","arguments","handle","name","endpoint","unsafeGet","group","endpoints","makeHandlers","handlers","append","withFullResponse","handleRaw","self","create","groupName","build","use","groups","result","empty","isEffect","groupMiddleware","routes","item","push","handlerToRoute","mapInputContext","input","concat","fromIterable","_api","_groupName","_name","f","requestPayload","urlParams","isMultipart","hasBody","method","orDie","multipart","json","initial","Map","forEach","tag","key","endpoint_","isFullResponse","decodePath","pathSchema","decodeUnknown","payloadSchema","schema","getMultipart","ast","getOrElse","decodePayload","decodeHeaders","headersSchema","decodeUrlParams","urlParamsSchema","encodeSuccess","encode","makeSuccessSchema","successSchema","makeRoute","path","withFiberRuntime","fiber","getFiberRef","currentContext","routeContext","RouteContext","ParsedSearchParams","params","_","flatMap","headers","pathParams","payload","catchIf","isParseError","HttpApiDecodeError","refailParseError","entry","values","SecurityTypeId","makeSecurityMiddleware","optional","previous","provides","provideService","provideServiceEffect","zipRight","securityMiddlewareCache","globalValue","security","entries","decode","securityDecode","void","responseSchema","declare","isServerResponse","schemas","Set","deunionize","Union","Array","from","toResponseSuccess","toResponseError","decodeForbidden","__","fail","Forbidden","toResponseSchema","getStatus","cache","schemaToResponse","data","isEmpty","isVoid","to","status","encoding","getEncoding","kind","mapError","contentType","Type","text","uint8Array","transform","transformOrFail","getStatusSuccessAST","getStatusErrorAST","middlewareAdd","current","getOption","withContext","middlewareAddNoContext","args","apiFirst","isHttpApi","add","middlewareScoped","scoped","middlewareCors","cors","middlewareOpenApi","spec","fromApi","response","bearerLen","length","authorization","slice","Struct","String","unify","in","schemaSearchParams","schemaCookies","schemaHeaders","match","username","password","decodeBase64String","header","parts","split","securitySetCookie","stringValue","appendPreResponseHandler","_req","setCookie","secure","httpOnly"],"sources":["../../src/HttpApiBuilder.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}