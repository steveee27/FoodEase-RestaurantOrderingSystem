{"version":3,"file":"HttpApp.js","names":["Context","_interopRequireWildcard","require","Effect","Exit","Layer","Runtime","Scope","_Unify","ServerError","ServerRequest","ServerResponse","internal","internalMiddleware","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","handledSymbol","Symbol","for","toHandled","self","handleResponse","middleware","responded","withFiberRuntime","fiber","flatMap","response","request","unsafeGet","currentContext","HttpServerRequest","handler","getFiberRef","currentPreResponseHandlers","_tag","as","tap","value","withErrorHandling","catchAllCause","cause","causeResponse","zipRight","failCause","withMiddleware","unify","undefined","tracer","matchCauseEffect","onFailure","void","_cause","empty","status","onSuccess","uninterruptible","scoped","exports","appendPreResponseHandler","withPreResponseHandler","toWebHandlerRuntime","runtime","run","runFork","resolveSymbol","httpApp","toWeb","withoutBody","method","Promise","resolve","httpServerRequest","fromWeb","provideService","signal","addEventListener","unsafeInterruptAsFork","clientAbortFiberId","once","toWebHandler","defaultRuntime","toWebHandlerLayer","layer","scope","runSync","make","close","runPromise","build","map","toRuntime","_","runner","extend","then"],"sources":["../../src/HttpApp.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}