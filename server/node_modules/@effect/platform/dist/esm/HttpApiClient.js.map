{"version":3,"file":"HttpApiClient.js","names":["Context","Effect","identity","Option","ParseResult","Schema","HttpApi","HttpApiSchema","HttpClient","HttpClientError","HttpClientRequest","HttpClientResponse","HttpMethod","make","api","options","gen","context","httpClient","pipe","baseUrl","undefined","mapRequest","prependUrl","transformClient","client","reflect","onGroup","group","topLevel","identifier","onEndpoint","endpoint","errors","successes","makeUrl","compilePath","path","decodeMap","orElse","statusOrElse","forEach","ast","status","_tag","statusCodeError","decode","schemaToResponse","value","response","flatMap","fail","responseAsVoid","isMultipart","payloadSchema","map","schema","getMultipart","getOrElse","encodePayload","filter","encodeUnknown","encodeHeaders","headersSchema","encodeUrlParams","urlParamsSchema","name","request","url","baseRequest","method","succeed","bodyFormData","payload","hasBody","bodyJson","setUrlParams","orDie","httpRequest","headers","setHeaders","urlParams","params","appendUrlParams","execute","matchStatus","transformResponse","scoped","catchIf","isParseError","die","mapInputContext","input","merge","paramsRegex","segments","split","len","length","_","i","encoding","getEncoding","decodeUnknown","kind","responseJson","schemaBodyUrlParams","arrayBuffer","buffer","Uint8Array","text","void","try","JSON","parse","catch","cause","ResponseError","reason","_response"],"sources":["../../src/HttpApiClient.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}